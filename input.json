{
  "datapackage": {
    "title": "Bindfit",
    "description": "Binding constant fitter",
    "algorithms": [
      {
        "name": "bindfit",
        "title": "Bindfit",
        "code": "ZGVmIG1haW4oCiAgICBpbnB1dERhdGEsCiAgICBpbnB1dFBhcmFtcywKICAgIGlucHV0T3B0aW9ucywKICAgIG91dHB1dHMsCiAgICAqKmt3YXJncywKKToKICAgIGltcG9ydCBudW1weSBhcyBucAogICAgaW1wb3J0IHBhbmRhcyBhcyBwZAoKICAgIGltcG9ydCBiaW5kZml0CgoKICAgICMgQ29udmVydCBwYXJhbXMgdG8gQmluZGZpdCBmb3JtYXQKICAgICMgVE9ETzogTW9kaWZ5IGxpYnJhcnkgdG8gYWNjZXB0IEZyaWN0aW9ubGVzcyBwYXJhbXMgZm9ybWF0CiAgICBiaW5kZml0X3BhcmFtcyA9IHt9CgogICAgZm9yIGtleSwgcGFyYW0gaW4gaW5wdXRQYXJhbXNbImRhdGEiXS5pdGVtcygpOgogICAgICAgIGJpbmRmaXRfcGFyYW1zLnVwZGF0ZSh7CiAgICAgICAgICAgIGtleTogewogICAgICAgICAgICAgICAgImluaXQiOiBwYXJhbVsidmFsdWUiXSwKICAgICAgICAgICAgICAgICJib3VuZHMiOiB7CiAgICAgICAgICAgICAgICAgICAgIm1pbiI6IHBhcmFtWyJsb3dlckJvdW5kIl0sCiAgICAgICAgICAgICAgICAgICAgIm1heCI6IHBhcmFtWyJ1cHBlckJvdW5kIl0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAjIEJpbmRmaXQgb3B0aW9ucwogICAgbW9kZWwgPSBpbnB1dE9wdGlvbnNbImRhdGEiXVsibW9kZWwiXQogICAgbWV0aG9kID0gaW5wdXRPcHRpb25zWyJkYXRhIl1bIm1ldGhvZCJdCiAgICBub3JtYWxpc2UgPSBpbnB1dE9wdGlvbnNbImRhdGEiXVsibm9ybWFsaXNlIl0KICAgIGRpbHV0ZSA9IGlucHV0T3B0aW9uc1siZGF0YSJdWyJkaWx1dGUiXQogICAgZmxhdm91ciA9IGlucHV0T3B0aW9uc1siZGF0YSJdWyJmbGF2b3VyIl0KCiAgICAjIExvYWQgZGF0YQogICAgIyBUT0RPOiBTcGxpdCB0aGlzIGZ1bmN0aW9uIG91dCBpbnRvIGRhdGFwYWNrYWdlLXV0aWxpdGllcyBsaWJyYXJ5CiAgICBkZWYgZGF0YXBhY2thZ2VfdG9fZGF0YWZyYW1lKGRwKToKICAgICAgICBkZiA9IHBkLkRhdGFGcmFtZS5mcm9tX2RpY3QoZHBbImRhdGEiXSkKICAgICAgICAjIFJlb3JkZXIgY29sdW1ucyBieSBzY2hlbWEgZmllbGQgb3JkZXIKICAgICAgICBjb2xzID0gWyBmaWVsZFsibmFtZSJdIGZvciBmaWVsZCBpbiBkcFsic2NoZW1hIl1bImZpZWxkcyJdIF0KICAgICAgICBkZiA9IGRmW2NvbHNdCiAgICAgICAgcmV0dXJuIGRmCgogICAgZGYgPSBkYXRhcGFja2FnZV90b19kYXRhZnJhbWUoaW5wdXREYXRhKQoKICAgICMgQmluZGZpdCBleHBlY3RzIGVhY2ggdmFyaWFibGUgYXMgcm93cwogICAgZGF0YV94ID0gbnAudHJhbnNwb3NlKGRmLmlsb2NbOiwgOjJdLnRvX251bXB5KCkpCiAgICBkYXRhX3kgPSBucC50cmFuc3Bvc2UoZGYuaWxvY1s6LCAyOl0udG9fbnVtcHkoKSkKCiAgICAjIEFwcGx5IGRpbHV0aW9uIGNvcnJlY3Rpb24KICAgICMgVE9ETzogVGhpbmsgYWJvdXQgd2hlcmUgdGhpcyBzaG91bGQgZ28gLSBmaXR0ZXIgb3IgZnVuY3Rpb24/CiAgICAjIE9yIGp1c3QgYXBwbHkgaXQgYmVmb3JlIHRoZSBmaXQ/CiAgICBpZiBkaWx1dGU6CiAgICAgICAgZGF0YV95ID0gYmluZGZpdC5oZWxwZXJzLmRpbHV0ZShkYXRhX3hbMF0sIGRhdGFfeSkKCiAgICBmdW5jdGlvbiA9IGJpbmRmaXQuZnVuY3Rpb25zLmNvbnN0cnVjdCgKICAgICAgICBtb2RlbCwKICAgICAgICBub3JtYWxpc2U9bm9ybWFsaXNlLAogICAgICAgIGZsYXZvdXI9Zmxhdm91ciwKICAgICkKCiAgICBmaXR0ZXIgPSBiaW5kZml0LmZpdHRlci5GaXR0ZXIoCiAgICAgICAgZGF0YV94LCBkYXRhX3ksIGZ1bmN0aW9uLCBub3JtYWxpc2U9bm9ybWFsaXNlLCBwYXJhbXM9YmluZGZpdF9wYXJhbXMKICAgICkKCiAgICBmaXR0ZXIucnVuX3NjaXB5KGJpbmRmaXRfcGFyYW1zLCBtZXRob2Q9bWV0aG9kKQoKICAgIHN1bW1hcnkgPSB7CiAgICAgICAgImZpdHRlciI6IG1vZGVsLAogICAgICAgICJmaXQiOiB7CiAgICAgICAgICAgICJ5IjogZml0dGVyLmZpdCwKICAgICAgICAgICAgImNvZWZmc19yYXciOiBmaXR0ZXIuY29lZmZzX3JhdywKICAgICAgICAgICAgImNvZWZmcyI6IGZpdHRlci5jb2VmZnMsCiAgICAgICAgICAgICJtb2xlZnJhY19yYXciOiBmaXR0ZXIubW9sZWZyYWNfcmF3LAogICAgICAgICAgICAibW9sZWZyYWMiOiBmaXR0ZXIubW9sZWZyYWMsCiAgICAgICAgICAgICJwYXJhbXMiOiBmaXR0ZXIucGFyYW1zLAogICAgICAgICAgICAibl95IjogbnAuYXJyYXkoZml0dGVyLmZpdCkuc2l6ZSwKICAgICAgICAgICAgIm5fcGFyYW1zIjogbGVuKGZpdHRlci5wYXJhbXMpICsgbnAuYXJyYXkoZml0dGVyLmNvZWZmc19yYXcpLnNpemUsCiAgICAgICAgfSwKICAgICAgICAicW9mIjogewogICAgICAgICAgICAicmVzaWR1YWxzIjogZml0dGVyLnJlc2lkdWFscywKICAgICAgICAgICAgInNzciI6IGJpbmRmaXQuaGVscGVycy5zc3IoZml0dGVyLnJlc2lkdWFscyksCiAgICAgICAgICAgICJybXMiOiBiaW5kZml0LmhlbHBlcnMucm1zKGZpdHRlci5yZXNpZHVhbHMpLAogICAgICAgICAgICAiY292IjogYmluZGZpdC5oZWxwZXJzLmNvdihkYXRhX3ksIGZpdHRlci5yZXNpZHVhbHMpLAogICAgICAgICAgICAicm1zX3RvdGFsIjogYmluZGZpdC5oZWxwZXJzLnJtcyhmaXR0ZXIucmVzaWR1YWxzLCB0b3RhbD1UcnVlKSwKICAgICAgICAgICAgImNvdl90b3RhbCI6IGJpbmRmaXQuaGVscGVycy5jb3YoZGF0YV95LCBmaXR0ZXIucmVzaWR1YWxzLCB0b3RhbD1UcnVlKSwKICAgICAgICB9LAogICAgICAgICJ0aW1lIjogZml0dGVyLnRpbWUsCiAgICAgICAgIm9wdGlvbnMiOiB7CiAgICAgICAgICAgICJkaWx1dGUiOiBkaWx1dGUsCiAgICAgICAgICAgICJub3JtYWxpc2UiOiBub3JtYWxpc2UsCiAgICAgICAgICAgICJtZXRob2QiOiBtZXRob2QsCiAgICAgICAgICAgICJmbGF2b3VyIjogZmxhdm91ciwKICAgICAgICB9LAogICAgfQoKICAgICMgVE9ETzogVGhpcyBjb252ZXJzaW9uIHNob3VsZCBiZSBtb3ZlZCB0byBCaW5kZml0IGxpYnJhcnkKICAgIGZvciBrZXksIHBhcmFtIGluIGZpdHRlci5wYXJhbXMuaXRlbXMoKToKICAgICAgICBvdXRwdXRzWyJvdXRwdXRQYXJhbXMiXS51cGRhdGUoewogICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgIGtleTogewogICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6IHBhcmFtWyJ2YWx1ZSJdLAogICAgICAgICAgICAgICAgICAgICJzdGRlcnIiOiBwYXJhbVsic3RkZXJyIl0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgIH0pCgogICAgIyBUcmFuc2xhdGUgZml0dGVyLmZpdCBpbnRvIEpTT04gZm9yIHRhYnVsYXIgZGF0YSBzY2hlbWEKICAgICMgVE9ETzogVGhpcyBzaG91bGQgYmUgZG9uZSBieSB0aGUgQmluZGZpdCBsaWJyYXJ5CiAgICBkZWYgZml0X3RvX2pzb24oZGF0YSwgZml0KToKICAgICAgICB4RmllbGRzID0gWyBpWyJuYW1lIl0gZm9yIGkgaW4gaW5wdXREYXRhWyJzY2hlbWEiXVsiZmllbGRzIl1bOjJdIF0KICAgICAgICB5RmllbGRzID0gWyBpWyJuYW1lIl0gZm9yIGkgaW4gaW5wdXREYXRhWyJzY2hlbWEiXVsiZmllbGRzIl1bMjpdIF0KCiAgICAgICAgZml0RGF0YSA9IFtdCgogICAgICAgIGZvciBkYXRhUm93LCBmaXRSb3cgaW4gemlwKGlucHV0RGF0YVsiZGF0YSJdLCBmaXQuVCk6CiAgICAgICAgICAgIHJvdyA9IHt9CgogICAgICAgICAgICBmb3IgZmllbGQgaW4geEZpZWxkczoKICAgICAgICAgICAgICAgIHJvd1tmaWVsZF0gPSBkYXRhUm93W2ZpZWxkXQoKICAgICAgICAgICAgZm9yIGksIGZpZWxkIGluIGVudW1lcmF0ZSh5RmllbGRzKToKICAgICAgICAgICAgICAgIHJvd1tmaWVsZF0gPSBmaXRSb3dbaV0KCiAgICAgICAgICAgIGZpdERhdGEuYXBwZW5kKHJvdykKCiAgICAgICAgcmV0dXJuIGZpdERhdGEKCiAgICBvdXRwdXRzWyJvdXRwdXRGaXQiXVsiZGF0YSJdID0gZml0X3RvX2pzb24oaW5wdXREYXRhLCBmaXR0ZXIuZml0KQogICAgb3V0cHV0c1sib3V0cHV0Rml0Il1bInNjaGVtYSJdID0gaW5wdXREYXRhWyJzY2hlbWEiXQoKICAgIHJldHVybiBvdXRwdXRzCg==",
        "inputs": [
          {
            "name": "inputData",
            "type": "resource",
            "resource": "inputData"
          },
          {
            "name": "inputParams",
            "type": "resource",
            "resource": "inputParams"
          },
          {
            "name": "inputOptions",
            "type": "resource",
            "resource": "inputOptions"
          }
        ],
        "outputs": [
          {
            "name": "outputParams",
            "type": "resource",
            "resource": "outputParams"
          },
          {
            "name": "outputFit",
            "type": "resource",
            "resource": "outputFit"
          }
        ]
      }
    ],
    "resources": [
      {
        "name": "inputData",
        "title": "Input data",
        "description": "Input data",
        "profile": "tabular-data-resource",
        "data": [
          {
            "Host": 0.000776,
            "Guest": 0.0,
            "Proton 1": 0.0,
            "Proton 2": 0.0,
            "Proton 3": 0.0,
            "Proton 4": 0.0
          },
          {
            "Host": 0.000776,
            "Guest": 9.70537e-05,
            "Proton 1": -0.0039,
            "Proton 2": -0.0005,
            "Proton 3": 0.0007,
            "Proton 4": 0.0002
          },
          {
            "Host": 0.000776,
            "Guest": 0.000193437,
            "Proton 1": -0.0074,
            "Proton 2": -0.001,
            "Proton 3": 0.0024,
            "Proton 4": 0.0012
          },
          {
            "Host": 0.000776,
            "Guest": 0.000289157,
            "Proton 1": -0.0113,
            "Proton 2": -0.0015,
            "Proton 3": 0.00365,
            "Proton 4": 0.0017
          },
          {
            "Host": 0.000776,
            "Guest": 0.00038422,
            "Proton 1": -0.0147,
            "Proton 2": -0.002,
            "Proton 3": 0.0044,
            "Proton 4": 0.00195
          },
          {
            "Host": 0.000776,
            "Guest": 0.000478632,
            "Proton 1": -0.0176,
            "Proton 2": -0.0025,
            "Proton 3": 0.00535,
            "Proton 4": 0.0022
          },
          {
            "Host": 0.000776,
            "Guest": 0.000572402,
            "Proton 1": -0.021,
            "Proton 2": -0.0029,
            "Proton 3": 0.00605,
            "Proton 4": 0.0027
          },
          {
            "Host": 0.000776,
            "Guest": 0.000665535,
            "Proton 1": -0.0245,
            "Proton 2": -0.0034,
            "Proton 3": 0.00655,
            "Proton 4": 0.00295
          },
          {
            "Host": 0.000776,
            "Guest": 0.000758037,
            "Proton 1": -0.0274,
            "Proton 2": -0.0039,
            "Proton 3": 0.00755,
            "Proton 4": 0.0032
          },
          {
            "Host": 0.000776,
            "Guest": 0.000849916,
            "Proton 1": -0.0299,
            "Proton 2": -0.0034,
            "Proton 3": 0.00855,
            "Proton 4": 0.0039
          },
          {
            "Host": 0.000776,
            "Guest": 0.000941176,
            "Proton 1": -0.0328,
            "Proton 2": -0.0044,
            "Proton 3": 0.00925,
            "Proton 4": 0.0041
          },
          {
            "Host": 0.000776,
            "Guest": 0.001076923,
            "Proton 1": -0.0362,
            "Proton 2": -0.0049,
            "Proton 3": 0.0102,
            "Proton 4": 0.00435
          },
          {
            "Host": 0.000776,
            "Guest": 0.001255814,
            "Proton 1": -0.0411,
            "Proton 2": -0.0059,
            "Proton 3": 0.0117,
            "Proton 4": 0.00485
          },
          {
            "Host": 0.000776,
            "Guest": 0.001476112,
            "Proton 1": -0.0465,
            "Proton 2": -0.0064,
            "Proton 3": 0.01315,
            "Proton 4": 0.0056
          },
          {
            "Host": 0.000776,
            "Guest": 0.001778502,
            "Proton 1": -0.0528,
            "Proton 2": -0.0074,
            "Proton 3": 0.0151,
            "Proton 4": 0.00635
          },
          {
            "Host": 0.000776,
            "Guest": 0.002198718,
            "Proton 1": -0.0611,
            "Proton 2": -0.0093,
            "Proton 3": 0.0171,
            "Proton 4": 0.00685
          },
          {
            "Host": 0.000776,
            "Guest": 0.002804382,
            "Proton 1": -0.0699,
            "Proton 2": -0.0103,
            "Proton 3": 0.0205,
            "Proton 4": 0.0083
          },
          {
            "Host": 0.000776,
            "Guest": 0.003569044,
            "Proton 1": -0.0797,
            "Proton 2": -0.0118,
            "Proton 3": 0.0234,
            "Proton 4": 0.0095
          },
          {
            "Host": 0.000776,
            "Guest": 0.004632801,
            "Proton 1": -0.09,
            "Proton 2": -0.0132,
            "Proton 3": 0.0273,
            "Proton 4": 0.01125
          },
          {
            "Host": 0.000776,
            "Guest": 0.006213802,
            "Proton 1": -0.1012,
            "Proton 2": -0.0147,
            "Proton 3": 0.0317,
            "Proton 4": 0.01315
          },
          {
            "Host": 0.000776,
            "Guest": 0.008810489,
            "Proton 1": -0.1139,
            "Proton 2": -0.0171,
            "Proton 3": 0.03565,
            "Proton 4": 0.0144
          },
          {
            "Host": 0.000776,
            "Guest": 0.012504331,
            "Proton 1": -0.1237,
            "Proton 2": -0.0181,
            "Proton 3": 0.04055,
            "Proton 4": 0.0169
          }
        ],
        "schema": {
          "primaryKey": "Host",
          "fields": [
            {
              "name": "Host",
              "title": "Host",
              "unit": "",
              "type": "number"
            },
            {
              "name": "Guest",
              "title": "Guest",
              "unit": "",
              "type": "number"
            },
            {
              "name": "Proton 1",
              "title": "Proton 1",
              "unit": "",
              "type": "number"
            },
            {
              "name": "Proton 2",
              "title": "Proton 2",
              "unit": "",
              "type": "number"
            },
            {
              "name": "Proton 3",
              "title": "Proton 3",
              "unit": "",
              "type": "number"
            },
            {
              "name": "Proton 4",
              "title": "Proton 4",
              "unit": "",
              "type": "number"
            }
          ]
        }
      },
      {
        "name": "inputParams",
        "title": "Input parameters",
        "description": "Initial parameter values",
        "profile": "parameter-data-resource",
        "data": {
          "k": {
            "vary": true,
            "value": 100,
            "lowerBound": 0,
            "upperBound": null
          }
        },
        "schema": {
          "keys": [
            {
              "name": "k",
              "unit": "M^{-1}",
              "fields": [
                {
                  "name": "vary",
                  "title": "Vary",
                  "type": "boolean"
                },
                {
                  "name": "value",
                  "title": "Value",
                  "type": "number"
                },
                {
                  "name": "lowerBound",
                  "title": "Lower bound",
                  "type": "number"
                },
                {
                  "name": "upperBound",
                  "title": "Upper bound",
                  "type": "number"
                }
              ]
            }
          ]
        }
      },
      {
        "name": "inputOptions",
        "title": "Fit options",
        "description": "Fit options",
        "profile": "options-data-resource",
        "data": {
          "model": "nmr1to1",
          "method": "Nelder-Mead",
          "normalise": true,
          "dilute": false,
          "flavour": "none"
        },
        "schema": {
          "fields": [
            {
              "name": "model",
              "title": "Fit model",
              "description": "The model to fit to the data",
              "type": "object",
              "objectFields": [
                {
                  "name": "title",
                  "type": "string"
                },
                {
                  "name": "name",
                  "type": "string"
                }
              ],
              "constraints": {
                "enum": [
                  {
                    "title": "NMR 1:1",
                    "name": "nmr1to1"
                  }
                ]
              }
            },
            {
              "name": "method",
              "title": "Fit method",
              "description": "The optimisation method to use for fitting",
              "type": "object",
              "objectFields": [
                {
                  "name": "title",
                  "type": "string"
                },
                {
                  "name": "name",
                  "type": "string"
                }
              ],
              "constraints": {
                "enum": [
                  {
                    "title": "Nelder-Mead",
                    "name": "Nelder-Mead"
                  },
                  {
                    "title": "L-BFGS-B",
                    "name": "L-BFGS-B"
                  }
                ]
              }
            },
            {
              "name": "normalise",
              "title": "Subtract initial values",
              "description": "Subtract initial values from data before fitting",
              "type": "boolean"
            },
            {
              "name": "dilute",
              "title": "Dilution correction",
              "description": "Apply dilution correction to data",
              "type": "boolean"
            },
            {
              "name": "flavour",
              "title": "Flavour",
              "description": "Fitting algorithm flavour",
              "type": "object",
              "objectFields": [
                {
                  "name": "title",
                  "type": "string"
                },
                {
                  "name": "name",
                  "type": "string"
                }
              ],
              "constraints": {
                "enum": [
                  {
                    "title": "None (Full)",
                    "name": "none"
                  },
                  {
                    "title": "Non-cooperative",
                    "name": "noncoop"
                  },
                  {
                    "title": "Additive",
                    "name": "add"
                  },
                  {
                    "title": "Statistical",
                    "name": "stat"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "name": "outputParams",
        "title": "Optimised parameters",
        "description": "Optimised parameter values",
        "profile": "parameter-data-resource",
        "data": {
          "k": {}
        },
        "schema": {
          "keys": [
            {
              "name": "k",
              "unit": "M^{-1}",
              "fields": [
                {
                  "name": "vary",
                  "title": "Vary",
                  "type": "boolean"
                },
                {
                  "name": "value",
                  "title": "Value",
                  "type": "number"
                },
                {
                  "name": "stderr",
                  "title": "Error",
                  "type": "number"
                },
                {
                  "name": "lowerBound",
                  "title": "Lower bound",
                  "type": "number"
                },
                {
                  "name": "upperBound",
                  "title": "Upper bound",
                  "type": "number"
                }
              ]
            }
          ]
        }
      },
      {
        "name": "outputFit",
        "title": "Fit",
        "description": "Output fit",
        "profile": "tabular-data-resource",
        "data": [],
        "schema": {
          "primaryKey": "",
          "fields": []
        }
      }
    ],
    "views": [
      {
        "name": "upload",
        "specType": "opendatafit-upload",
        "spec": {},
        "resources": [
          "inputData"
        ]
      },
      {
        "name": "params",
        "title": "Parameters",
        "specType": "opendatafit-params",
        "spec": {
          "keys": [
            {
              "name": "k"
            }
          ]
        },
        "resources": [
          "inputParams",
          "outputParams"
        ]
      }
    ],
    "displays": [
      {
        "name": "main",
        "algorithms": [
          "bindfit"
        ],
        "layout": {
          "type": "bindfit",
          "spec": {
            "panes": [
              {
                "name": "control",
                "tabs": [
                  "upload",
                  "params"
                ]
              },
              {
                "name": "main",
                "tabs": []
              }
            ],
            "tabs": [
              {
                "name": "upload",
                "title": "Upload",
                "icon": "",
                "views": [
                  "upload"
                ]
              },
              {
                "name": "params",
                "title": "Parameters",
                "icon": "",
                "views": [
                  "params"
                ]
              }
            ]
          }
        }
      }
    ]
  },
  "algorithm": "bindfit"
}