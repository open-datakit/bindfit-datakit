{
  "name": "bindfit",
  "title": "Bindfit",
  "profile": "ods-algorithm",
  "code": "algorithm.py",
  "signature": [
    {
      "name": "data",
      "title": "Input data",
      "description": "Input data",
      "type": "resource",
      "profile": "tabular-data-resource",
      "format": [
        "data",
        "dataAgg"
      ],
      "null": false,
      "defaultConfiguration": {
        "resource": "data",
        "format": "data"
      }
    },
    {
      "name": "method",
      "title": "Fit method",
      "description": "The optimisation method to use for fitting",
      "type": "string",
      "enum": [
        {
          "title": "Nelder-Mead",
          "value": "nelder-mead"
        },
        {
          "title": "L-BFGS-B",
          "value": "bfgs"
        }
      ],
      "null": false,
      "defaultConfiguration": {
        "value": "nelder-mead"
      }
    },
    {
      "name": "model",
      "title": "Model",
      "description": "The model to fit to the data",
      "type": "string",
      "enum": [
        {
          "title": "NMR 1:1",
          "value": "nmr1to1"
        },
        {
          "title": "NMR 1:2",
          "value": "nmr1to2"
        },
        {
          "title": "NMR 2:1",
          "value": "nmr2to1"
        },
        {
          "title": "NMR Dimer",
          "value": "nmrdimer"
        },
        {
          "title": "NMR CoEK",
          "value": "nmrcoek"
        },
        {
          "title": "UV 1:1",
          "value": "uv1to2"
        },
        {
          "title": "UV 1:2",
          "value": "uv1to2"
        },
        {
          "title": "UV 2:1",
          "value": "uv2to1"
        },
        {
          "title": "UV Dimer",
          "value": "uvdimer"
        },
        {
          "title": "UV CoEK",
          "value": "uvcoek"
        }
      ],
      "null": false,
      "defaultConfiguration": {
        "value": "nmr1to1"
      }
    },
    {
      "name": "params",
      "title": "Parameters",
      "description": "Parameter initial guesses and optimised values",
      "type": "resource",
      "profile": "parameter-tabular-data-resource",
      "format": "params",
      "null": false,
      "defaultConfiguration": {
        "resource": "params",
        "format": "params"
      }
    },
    {
      "name": "subInitValues",
      "title": "Subtract initial values",
      "description": "If true, assumes the first data point is the chemical shift of the pure host and fits only the differences between pure host and complex(es)",
      "type": "boolean",
      "null": false,
      "defaultConfiguration": {
        "value": true
      }
    },
    {
      "name": "dilutionCorrection",
      "title": "Dilution correction",
      "description": "If true, apply dilution correction to the data before fitting",
      "type": "boolean",
      "null": false,
      "defaultConfiguration": {
        "value": false
      }
    },
    {
      "name": "flavour",
      "title": "Dilution correction",
      "description": "If true, apply dilution correction to the data before fitting",
      "type": "string",
      "enum": [
        {
          "title": "Add",
          "value": "add"
        },
        {
          "title": "Stat",
          "value": "stat"
        },
        {
          "title": "Non-coop",
          "value": "noncoop"
        }
      ],
      "null": true,
      "defaultConfiguration": {
        "value": null,
        "disabled": true
      }
    },
    {
      "name": "fitCurve",
      "title": "Fit curve",
      "description": "Fit curve",
      "type": "resource",
      "profile": "tabular-data-resource",
      "null": true,
      "format": [
        "data",
        "dataAgg"
      ],
      "defaultConfiguration": {
        "resource": "fitCurve",
        "format": "data"
      }
    },
    {
      "name": "fitResiduals",
      "title": "Fit residuals",
      "description": "Fit residuals",
      "type": "resource",
      "profile": "tabular-data-resource",
      "null": true,
      "format": [
        "data",
        "dataAgg"
      ],
      "defaultConfiguration": {
        "resource": "fitResiduals",
        "format": "data"
      }
    },
    {
      "name": "fitMolefractions",
      "title": "Fit molefractions",
      "description": "Fit residuals",
      "type": "resource",
      "profile": "tabular-data-resource",
      "null": true,
      "format": [
        "molefractions11",
        "molefractions12",
        "molefractions21",
        "molefractionsAgg"
      ],
      "defaultConfiguration": {
        "resource": "fitMolefractions",
        "format": "molefractions11"
      }
    },
    {
      "name": "fitCoefficients",
      "title": "Fit coefficients",
      "description": "Fit coefficients",
      "type": "resource",
      "profile": "tabular-data-resource",
      "null": true,
      "format": [
        "coefficients11",
        "coefficients12",
        "coefficients21",
        "coefficientsAgg"
      ],
      "defaultConfiguration": {
        "resource": "fitCoefficients",
        "format": "coefficients11"
      }
    },
    {
      "name": "fitQuality",
      "title": "Fit quality",
      "description": "Fit quality",
      "type": "resource",
      "profile": "tabular-data-resource",
      "null": true,
      "format": "quality",
      "defaultConfiguration": {
        "resource": "fitQuality",
        "format": "quality"
      }
    },
    {
      "name": "fitSummary",
      "title": "Fit summary",
      "description": "Fit summary",
      "type": "resource",
      "profile": "tabular-data-resource",
      "null": true,
      "format": "summary",
      "defaultConfiguration": {
        "resource": "fitSummary",
        "format": "summary"
      }
    }
  ],
  "relationships": [
    {
      "source": "model",
      "rules": [
        {
          "description": "NMR/UV 1:1 parameter defaults",
          "type": "value",
          "values": [
            "nmr1to1",
            "uv1to1"
          ],
          "targets": [
            {
              "name": "params",
              "type": "resource",
              "data": [
                {
                  "name": "k",
                  "fit": true,
                  "init": 100,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": 1000,
                  "stderr": null
                }
              ]
            }
          ]
        },
        {
          "description": "NMR/UV 1:2 parameter defaults",
          "type": "value",
          "values": [
            "nmr1to2",
            "uv1to2"
          ],
          "targets": [
            {
              "name": "params",
              "type": "resource",
              "data": [
                {
                  "name": "k11",
                  "fit": true,
                  "init": 1000,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": null,
                  "stderr": null
                },
                {
                  "name": "k12",
                  "fit": true,
                  "init": 100,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": null,
                  "stderr": null
                }
              ]
            }
          ]
        },
        {
          "description": "NMR/UV 2:1 parameter defaults",
          "type": "value",
          "values": [
            "nmr2to1",
            "uv2to1"
          ],
          "targets": [
            {
              "name": "params",
              "type": "resource",
              "data": [
                {
                  "name": "k11",
                  "fit": true,
                  "init": 1000,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": null,
                  "stderr": null
                },
                {
                  "name": "k21",
                  "fit": true,
                  "init": 100,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": null,
                  "stderr": null
                }
              ]
            }
          ]
        },
        {
          "description": "NMR/UV Dimer parameter defaults",
          "type": "value",
          "values": [
            "nmrdimer",
            "uvdimer"
          ],
          "targets": [
            {
              "name": "params",
              "type": "resource",
              "data": [
                {
                  "name": "ke",
                  "fit": true,
                  "init": 100,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": 1000,
                  "stderr": null
                }
              ]
            }
          ]
        },
        {
          "description": "NMR CoEK parameter defaults",
          "type": "value",
          "values": [
            "nmrcoek"
          ],
          "targets": [
            {
              "name": "params",
              "type": "resource",
              "data": [
                {
                  "name": "ke",
                  "fit": true,
                  "init": 200,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": null,
                  "stderr": null
                },
                {
                  "name": "rho",
                  "fit": true,
                  "init": 0.3,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": null,
                  "stderr": null
                }
              ]
            }
          ]
        },
        {
          "description": "UV CoEK parameter defaults",
          "type": "value",
          "values": [
            "uvcoek"
          ],
          "targets": [
            {
              "name": "params",
              "type": "resource",
              "data": [
                {
                  "name": "ke",
                  "fit": true,
                  "init": 2700,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": null,
                  "stderr": null
                },
                {
                  "name": "rho",
                  "fit": true,
                  "init": 0.003,
                  "value": null,
                  "lowerBound": 0,
                  "upperBound": null,
                  "stderr": null
                }
              ]
            }
          ]
        },
        {
          "description": "NMR sub init values and dilution correction",
          "type": "value",
          "values": [
            "nmr1to1",
            "nmr1to2",
            "nmr2to1"
          ],
          "targets": [
            {
              "name": "subInitValues",
              "type": "value",
              "value": true
            },
            {
              "name": "dilutionCorrection",
              "type": "value",
              "value": false
            }
          ]
        },
        {
          "description": "UV sub init values and dilution correction",
          "type": "value",
          "values": [
            "uv1to1",
            "uv1to2",
            "uv2to1"
          ],
          "targets": [
            {
              "name": "subInitValues",
              "type": "value",
              "value": true
            },
            {
              "name": "dilutionCorrection",
              "type": "value",
              "value": true
            }
          ]
        },
        {
          "description": "Disable flavour for 1:1 and agg models",
          "type": "value",
          "values": [
            "nmr1to1",
            "nmrdimer",
            "nmrcoek",
            "uv1to1",
            "uvdimer",
            "uvcoek"
          ],
          "targets": [
            {
              "name": "flavour",
              "type": "value",
              "value": null,
              "disabled": true
            }
          ]
        },
        {
          "description": "Enable flavour for 1:2, 2:1 models",
          "type": "value",
          "values": [
            "uv1to2",
            "uv2to1",
            "nmr1to2",
            "nmr2to1"
          ],
          "targets": [
            {
              "name": "flavour",
              "type": "value",
              "value": null,
              "disabled": false
            }
          ]
        }
      ]
    }
  ]
}
